<!DOCTYPE html>
<html>
<head>
    <title>Debug App</title>
</head>
<body>
    <div id="debug-output"></div>
    
    <script src="js/utils/EventBus.js"></script>
    <script src="js/utils/Logger.js"></script>
    <script src="js/core/GameState.js"></script>
    <script src="js/core/RuleEngine.js"></script>
    <script src="js/core/AIEngine.js"></script>
    <script src="js/ui/CanvasRenderer.js"></script>
    <script src="js/ui/HudPanel.js"></script>
    <script src="js/services/SaveLoadService.js"></script>
    <script src="js/services/ReplayService.js"></script>
    <script src="js/ModeManager.js"></script>
    <script src="js/GameController.js"></script>
    <script src="js/main.js"></script>
    
    <script>
        const output = document.getElementById('debug-output');
        
        function log(message) {
            output.innerHTML += message + '<br>';
            console.log(message);
        }
        
        // Override console methods to capture them
        const originalError = console.error;
        console.error = function(...args) {
            log('ERROR: ' + args.join(' '));
            originalError.apply(console, args);
        };
        
        // Test app start manually
        document.addEventListener('DOMContentLoaded', async () => {
            log('DOM Content Loaded');
            
            // Wait a bit for scripts to fully load
            setTimeout(async () => {
                log('Checking modules...');
                
                const requiredModules = [
                    'EventBus', 'Logger', 'GameState', 'RuleEngine', 'AIEngine',
                    'CanvasRenderer', 'HudPanel', 'SaveLoadService', 'ReplayService',
                    'ModeManager', 'GameController'
                ];
                
                const missingModules = requiredModules.filter(name => !window[name]);
                if (missingModules.length > 0) {
                    log('Missing modules: ' + missingModules.join(', '));
                    return;
                }
                
                log('All modules available');
                
                try {
                    log('Creating app...');
                    const app = new GameController();
                    log('App created successfully');
                    
                    log('Initializing app...');
                    const initResult = await app.initialize();
                    log('Init result: ' + JSON.stringify(initResult));
                    
                    if (initResult.success) {
                        log('Starting app...');
                        const startResult = app.start();
                        log('Start result: ' + JSON.stringify(startResult));
                    }
                } catch (e) {
                    log('Error: ' + e.message);
                    log('Stack: ' + e.stack);
                }
            }, 100);
        });
    </script>
</body>
</html>